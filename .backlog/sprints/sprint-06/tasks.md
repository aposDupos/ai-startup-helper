# Sprint 06 ‚Äî Critical Fixes (~1 –Ω–µ–¥)

**–¶–µ–ª—å:** –ü–æ—á–∏–Ω–∏—Ç—å —Å–ª–æ–º–∞–Ω–Ω–æ–µ ‚Äî progress tracking, entry points, –Ω–∞–≤–∏–≥–∞—Ü–∏—è, ContextSwitcher.
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** Sprint 01‚Äì05 –∑–∞–≤–µ—Ä—à–µ–Ω—ã. –í—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (001‚Äì011) –ø—Ä–∏–º–µ–Ω–µ–Ω—ã.

---

## S06-001: –ü–æ—á–∏–Ω–∏—Ç—å Progress Tracking
**–°—Ç–∞—Ç—É—Å:** [x]
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** ‚Äî
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã (problem, target_audience –∏ —Ç.–¥.) —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `update-project-artifacts.ts`, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç `executeCompleteChecklist()` –¥–ª—è –∞–≤—Ç–æ-–∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —á–µ–∫–ª–∏—Å—Ç–∞. –ù–æ –æ—à–∏–±–∫–∏ –ø–æ–≥–ª–æ—â–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `console.warn`, dashboard –Ω–µ revalidate'–∏—Ç—Å—è.
**–î–µ–π—Å—Ç–≤–∏—è:**
- `src/lib/ai/tools/update-project-artifacts.ts`: –∑–∞–º–µ–Ω–∏—Ç—å `console.warn` –Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ + –≤–æ–∑–≤—Ä–∞—Ç –æ—à–∏–±–∫–∏ –≤ result
- `src/app/api/chat/route.ts`: –¥–æ–±–∞–≤–∏—Ç—å `revalidatePath('/dashboard')` –ø–æ—Å–ª–µ tool execution
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å RLS policies –Ω–∞ —Ç–∞–±–ª–∏—Ü–µ `projects` ‚Äî —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ update progress_data —Ä–∞–∑—Ä–µ—à—ë–Ω –¥–ª—è owner
- –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç: –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ progress_data
**–§–∞–π–ª—ã:**
- `src/lib/ai/tools/update-project-artifacts.ts` ‚Äî error handling
- `src/app/api/chat/route.ts` ‚Äî revalidatePath
**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏:**
- [ ] –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ "problem" —á–µ—Ä–µ–∑ —á–∞—Ç ‚Üí `progress_data.idea.completedItems` —Å–æ–¥–µ—Ä–∂–∏—Ç `define_problem`
- [ ] Dashboard –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç ‚úÖ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º –ø—É–Ω–∫—Ç–µ —á–µ–∫–ª–∏—Å—Ç–∞ –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- [ ] –û—à–∏–±–∫–∏ auto-complete –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ tool result
- [ ] `revalidatePath` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –ª—é–±–æ–≥–æ tool call

---

## S06-002: –ü–æ—á–∏–Ω–∏—Ç—å Entry Points (chat context)
**–°—Ç–∞—Ç—É—Å:** [x]
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** ‚Äî
**–û–ø–∏—Å–∞–Ω–∏–µ:** `CreateProjectWidget` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ `/chat?context=idea_search` –∏ —Ç.–¥., –Ω–æ `chat/page.tsx` –Ω–µ —á–∏—Ç–∞–µ—Ç query params. –í—Å–µ 4 –ø—É—Ç–∏ –≤–µ–¥—É—Ç –≤ –æ–¥–∏–Ω generic —á–∞—Ç.
**–î–µ–π—Å—Ç–≤–∏—è:**
- `src/app/(main)/chat/page.tsx`: –¥–æ–±–∞–≤–∏—Ç—å `searchParams` prop, —á–∏—Ç–∞—Ç—å `context`
- –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å `initialContext` –≤ `ChatWindow` –∫–∞–∫ prop
- `ChatWindow.tsx`: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `initialContext` –¥–ª—è –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞ —Å—Ç–∞–¥–∏–∏
- –ü—Ä–∏ `context=learning` ‚Üí redirect –Ω–∞ `/learning` (–ø–æ—Å–ª–µ S08)
- –î–æ–±–∞–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç AI –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç context:
  - `idea_search`: "–ü—Ä–∏–≤–µ—Ç! –î–∞–≤–∞–π –Ω–∞–π–¥—ë–º –∏–¥–µ—é –¥–ª—è —Å—Ç–∞—Ä—Ç–∞–ø–∞. –†–∞—Å—Å–∫–∞–∂–∏ –æ —Å–≤–æ–∏—Ö –∏–Ω—Ç–µ—Ä–µ—Å–∞—Ö..."
  - `idea_evaluation`: "–ü—Ä–∏–≤–µ—Ç! –†–∞—Å—Å–∫–∞–∂–∏ —Å–≤–æ—é –∏–¥–µ—é, –∏ —è –ø–æ–º–æ–≥—É –µ—ë –æ—Ü–µ–Ω–∏—Ç—å."
  - `project_assessment`: "–ü—Ä–∏–≤–µ—Ç! –†–∞—Å—Å–∫–∞–∂–∏ –æ —Å–≤–æ—ë–º –ø—Ä–æ–µ–∫—Ç–µ, –∏ —è –æ–ø—Ä–µ–¥–µ–ª—é –Ω–∞ –∫–∞–∫–æ–π —Å—Ç–∞–¥–∏–∏ —Ç—ã –Ω–∞—Ö–æ–¥–∏—à—å—Å—è."
**–§–∞–π–ª—ã:**
- `src/app/(main)/chat/page.tsx` ‚Äî searchParams
- `src/components/chat/ChatWindow.tsx` ‚Äî initialContext prop
**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏:**
- [ ] –ö–ª–∏–∫ ¬´–£ –º–µ–Ω—è –Ω–µ—Ç –∏–¥–µ–∏¬ª ‚Üí —á–∞—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ–º –ø—Ä–æ –ø–æ–∏—Å–∫ –∏–¥–µ–∏
- [ ] –ö–ª–∏–∫ ¬´–£ –º–µ–Ω—è –µ—Å—Ç—å –∏–¥–µ—è¬ª ‚Üí —á–∞—Ç —Å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ–º –ø—Ä–æ –æ—Ü–µ–Ω–∫—É
- [ ] –ö–ª–∏–∫ ¬´–£ –º–µ–Ω—è —É–∂–µ –ø—Ä–æ–µ–∫—Ç¬ª ‚Üí —á–∞—Ç —Å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ–º –ø—Ä–æ assessment
- [ ] –ü—Ä—è–º–æ–π –∑–∞—Ö–æ–¥ –≤ `/chat` ‚Üí —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ project.stage

---

## S06-003: –ü–æ—á–∏–Ω–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é –∏ Sidebar
**–°—Ç–∞—Ç—É—Å:** [x]
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** ‚Äî
**–û–ø–∏—Å–∞–Ω–∏–µ:** Sidebar –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç hardcoded "‚≠ê Lvl 1" –∏ –≤–µ–¥—ë—Ç –Ω–∞ `/academy` (404). –ù—É–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫–∏.
**–î–µ–π—Å—Ç–≤–∏—è:**
- `Sidebar.tsx`: –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (level, xp, display_name, streak_count) —á–µ—Ä–µ–∑ server action –∏–ª–∏ props –∏–∑ layout
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–π level/XP/streak –≤ –Ω–∏–∂–Ω–µ–π —Å–µ–∫—Ü–∏–∏ Sidebar
- –ò–∑–º–µ–Ω–∏—Ç—å `/academy` ‚Üí `/learning` –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- `BottomNav.tsx`: –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- Layout –ø–µ—Ä–µ–¥–∞—ë—Ç user data –≤ Sidebar —á–µ—Ä–µ–∑ context –∏–ª–∏ props
**–§–∞–π–ª—ã:**
- `src/components/shared/Sidebar.tsx` ‚Äî real user data, fix /academy link
- `src/components/shared/BottomNav.tsx` ‚Äî fix /academy link
- `src/app/(main)/layout.tsx` ‚Äî fetch user profile data, pass to Sidebar
**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏:**
- [ ] Sidebar –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] Sidebar –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π level –∏ XP (e.g. "üî• 3 | ‚≠ê Lvl 2")
- [ ] –ö–ª–∏–∫ "Learning" –≤–µ–¥—ë—Ç –Ω–∞ `/learning` (–±–µ–∑ 404)
- [ ] BottomNav –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –æ–±–Ω–æ–≤–ª—ë–Ω

---

## S06-004: –£–±—Ä–∞—Ç—å ContextSwitcher ‚Üí Read-only Badge
**–°—Ç–∞—Ç—É—Å:** [x]
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** S06-002
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ó–∞–º–µ–Ω–∏—Ç—å –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏ —Å—Ç–∞–¥–∏–π –Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π read-only badge.
**–î–µ–π—Å—Ç–≤–∏—è:**
- –°–æ–∑–¥–∞—Ç—å `src/components/chat/StageBadge.tsx` ‚Äî –ø—Ä–æ—Å—Ç–æ–π badge —Å –∏–∫–æ–Ω–∫–æ–π –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Ç–µ–∫—É—â–µ–π —Å—Ç–∞–¥–∏–∏
- –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ deprecate `ContextSwitcher.tsx`
- ChatWindow: —É–±—Ä–∞—Ç—å ContextSwitcher, –¥–æ–±–∞–≤–∏—Ç—å StageBadge
- Badge –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: emoji + "–°—Ç–∞–¥–∏—è: –í–∞–ª–∏–¥–∞—Ü–∏—è" (–∏–∑ project.stage)
- –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞: "üí¨ –û–±—â–∏–π —á–∞—Ç"
**–§–∞–π–ª—ã:**
- `src/components/chat/StageBadge.tsx` [NEW]
- `src/components/chat/ContextSwitcher.tsx` [DELETE or DEPRECATE]
- `src/components/chat/ChatWindow.tsx` ‚Äî replace ContextSwitcher with StageBadge
**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏:**
- [ ] –ù–µ—Ç –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã—Ö –≤–∫–ª–∞–¥–æ–∫ –≤ —á–∞—Ç–µ
- [ ] –ï—Å—Ç—å read-only badge —Å —Ç–µ–∫—É—â–µ–π —Å—Ç–∞–¥–∏–µ–π
- [ ] Badge –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ —Å–º–µ–Ω–µ —Å—Ç–∞–¥–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
- [ ] –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî "üí¨ –û–±—â–∏–π —á–∞—Ç"
